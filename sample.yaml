connectivityPlugins:
  classifierCodec:
    libraryName: ClassifierCodec
    class: ClassifierCodec
  rustTransport:
    directory: ${PARENT_DIR}/target/debug
    libraryName: RustTransport
    class: RustTransport
  stringCodec:
    libraryName: connectivity-string-codec
    class: StringCodec
  diag:
    libraryName: DiagnosticCodec
    class: DiagnosticCodec

startChains:

  # Create a chain which will take HTTPRequest events and send them to the
  # transport, then classify the responses as either an HTTPResponse or
  # an HTTPError and turn them into those events in the correlator
  http:
    # Use the Map host plugin, so the payload type will be a map<string,data>
    # with the keys being the name of the fields in the event
    - apama.eventMap:
        # Capture events to this channel ...
        subscribeChannels:
          - getRequest
        # ... and send them back to this channel
        defaultChannel: httpdata


    - diag: { tag: transport }
    
    - rustTransport

